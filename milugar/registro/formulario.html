<!DOCTYPE html>
<html>
<head>
<link rel="stylesheet" href="../menu.css">
  <link rel="stylesheet" href="estilo.css">
  <script>
function comprobarClave(){
	clave1 =  document.getElementById('clave1').value;
	clave2 =  document.getElementById('clave2').value;
	
	if (clave1 == clave2)
		{
			var obj = {};
			obj.nombre = document.getElementById('nombre').value ;
			obj.email = document.getElementById('email').value;
			obj.clave = document.getElementById('clave1').value;
			obj.descripcion = document.getElementById('text').value;

		// convertimos el objeto a formato JSON
			var parametros = JSON.stringify(obj);

		// creamos un objeto XMLRequest
			var xmlhttp = new XMLHttpRequest();

		
		// Que hacer el usuario manda a grabar
			xmlhttp.open("POST", "guardar.php", true);
			xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
			xmlhttp.send("x=" + parametros); 
			// Una funcion para ejecutar SI TODO SALIO BIEN, es decir, si se pudo grabar en el servidor. OJO que se ejecuta DESPUES de grabar 
			xmlhttp.onreadystatechange = function() {
				if (this.readyState == 4 && this.status == 200) {
					document.getElementById('nombre').value = '';
					document.getElementById('email').value = '';
					document.getElementById('clave1').value = '';
					document.getElementById('clave2').value = '';
					document.getElementById('text').value = '';
				}
			};
		}
	else
		{alert("Las dos claves son distintas...\n");
					document.getElementById('clave1').value = '';
					document.getElementById('clave2').value = '';}
}
</script>
</head>
<body>
<div class="flex-container">
    <div><a href="../principal.html">Mi Lugar</a></div>
  <div><a href="../biblioteca/biblioteca.html">Biblioteca</a></div>
  <div><a href="#">Mis cosas</a></div>
  <div><a href="#">Mi Perfil</a></div>
</div>

<h1>Formulario</h1>
<p>
<form class="centrado" action="" >
  <div>
  <p>Nombre de Usuario:</p>
  <input type="text" id="nombre" required>
  <br><br>
  <p>E-mail:</p>
  <input type="email" id="email" required>
  <br><br>
  <p>Contraseña: </p><input type="password" id="clave1" size="20">
  <br>
  <p>Repita la contraseña:</p> <input type="password" id="clave2" size="20">
  <br>
  <p>Descripción sobre usted:</p>
   <textarea id="text" rows="5" cols="30">

   </textarea>
   <h3>Aprete enviar para teminar.<h3> <br>
  <input type="button" value="Enviar"  onClick="comprobarClave()" >
  </div>
</form> 

</body>
</html>